# Create an OSEv3 group that contains the masters, nodes, and etcd groups
[OSEv3:children]

masters
nodes
etcd
glusterfs
glusterfs

[OSEv3:vars]

ansible_ssh_user=root
ansible_ssh_common_args='-o StrictHostKeyChecking=no'
openshift_deployment_type=openshift-enterprise
openshift_use_crio=false
openshift_portal_net=172.30.0.0/16
openshift_master_api_port=443
openshift_master_console_port=443
os_firewall_use_firewalld=true
openshift_disable_check=docker_storage,docker_image_availability,package_version
oreg_auth_user=coc_europa
oreg_auth_password=Passw0rd=
oreg_test_login=false
openshift_certificate_expiry_fail_on_warn=false
openshift_docker_options='--selinux-enabled --insecure-registry 172.30.0.0/16 --log-driver=json-file --log-opt max-size=1M --log-opt max-file=3'
openshift_master_cluster_method=native
openshift_master_cluster_hostname=ocpmstr1.10.134.214.155.nip.io
openshift_master_cluster_public_hostname=ocpmstr1.10.134.214.155.nip.io
openshift_master_identity_providers=[{'name': 'htpasswd_auth', 'login': 'true', 'challenge': 'true', 'kind': 'HTPasswdPasswordIdentityProvider'}]
openshift_master_htpasswd_users={'admin': '$apr1$qSzqkDd8$fU.yI4bV8KmXD9kreFSL//'}
openshift_console_install=true
openshift_release=v3.11

# logging
openshift_logging_install_logging=true
openshift_logging_es_pvc_dynamic=true
openshift_logging_es_pvc_storage_class_name="glusterfs-registry-block"
openshift_logging_es_pvc_size=20Gi
openshift_logging_es_ops_nodeselector={"node-role.kubernetes.io/infra":"true"}
openshift_logging_es_nodeselector={"node-role.kubernetes.io/infra":"true"}
openshift_logging_kibana_nodeselector={"node-role.kubernetes.io/infra": "true"}
openshift_logging_curator_nodeselector={"node-role.kubernetes.io/infra": "true"}
openshift_logging_es_cluster_size=2
openshift_logging_es_memory_limit=8Gi
openshift_logging_es_ops_memory_limit=8Gi

# monitoring
openshift_cluster_monitoring_operator_install=true
openshift_cluster_monitoring_operator_prometheus_storage_enabled=true
openshift_cluster_monitoring_operator_prometheus_storage_class_name="glusterfs-registry-block"
openshift_cluster_monitoring_operator_alertmanager_storage_enabled=true
openshift_cluster_monitoring_operator_alertmanager_storage_class_name="glusterfs-registry-block"
openshift_cluster_monitoring_operator_node_selector={"node-role.kubernetes.io/infra":"true"}

# metrics
openshift_metrics_install_metrics=true
openshift_metrics_cassandra_storage_type=dynamic
openshift_metrics_cassandra_pvc_storage_class_name="glusterfs-registry-block"
openshift_metrics_hawkular_nodeselector={"node-role.kubernetes.io/infra": "true"}
openshift_metrics_cassandra_nodeselector={"node-role.kubernetes.io/infra": "true"}
openshift_metrics_heapster_nodeselector={"node-role.kubernetes.io/infra": "true"}
openshift_metrics_storage_volume_size=20Gi


# glusterfs
openshift_storage_glusterfs_timeout=900
openshift_storage_glusterfs_namespace=glusterfs
openshift_storage_glusterfs_storageclass=true
openshift_storage_glusterfs_storageclass_default=false
openshift_storage_glusterfs_block_deploy=true
openshift_storage_glusterfs_block_storageclass=true
openshift_storage_glusterfs_block_storageclass_default=false
openshift_storage_glusterfs_block_host_vol_create=true
openshift_storage_glusterfs_block_host_vol_size=100
openshift_storage_glusterfs_block_deploy=true
openshift_storage_glusterfs_block_storageclass=true
openshift_storage_glusterfs_storageclass=true
openshift_storage_glusterfs_storageclass_default=true

# glusterfs_registry
openshift_storage_glusterfs_registry_namespace=glusterfs-registry
openshift_storage_glusterfs_registry_storageclass=true
openshift_storage_glusterfs_registry_storageclass_default=false
openshift_storage_glusterfs_registry_block_storageclass=true
openshift_storage_glusterfs_registry_block_storageclass_default=false
openshift_storage_glusterfs_registry_block_deploy=true
openshift_storage_glusterfs_registry_block_host_vol_create=true
openshift_storage_glusterfs_registry_block_host_vol_size=100

# glusterfs_registry_storage
openshift_hosted_registry_storage_kind=glusterfs
openshift_hosted_registry_storage_volume_size=20Gi
openshift_hosted_registry_selector="node-role.kubernetes.io/infra=true"
openshift_storage_glusterfs_heketi_admin_key='adminkey'
openshift_storage_glusterfs_heketi_user_key='heketiuserkey'

# gluster images
openshift_storage_glusterfs_s3_image='registry.access.redhat.com/rhgs3/rhgs-s3-server-rhel7:v3.11'
openshift_storage_glusterfs_image='registry.access.redhat.com/rhgs3/rhgs-server-rhel7:v3.11'
openshift_storage_glusterfs_heketi_image='registry.access.redhat.com/rhgs3/rhgs-volmanager-rhel7:v3.11'
openshift_storage_glusterfs_block_image='registry.access.redhat.com/rhgs3/rhgs-gluster-block-prov-rhel7:v3.11'

[glusterfs]
ocpinfra1.10.134.214.160.nip.io glusterfs_cluster=1 glusterfs_devices='["/dev/sdd"]'
ocpinfra2.10.134.214.161.nip.io glusterfs_cluster=1 glusterfs_devices='["/dev/sdd"]'
ocpinfra3.10.134.214.162.nip.io glusterfs_cluster=1 glusterfs_devices='["/dev/sdd"]'

[glusterfs_registry]
ocpinfra1.10.134.214.160.nip.io glusterfs_devices='["/dev/sdd"]'
ocpinfra1.10.134.214.161.nip.io glusterfs_devices='["/dev/sdd"]'
ocpinfra3.10.134.214.162.nip.io glusterfs_devices='["/dev/sdd"]'

[masters]
ocpmstr1.10.134.214.155.nip.io

[etcd]
ocpmstr1.10.134.214.155.nip.io

[nodes]
ocpmstr1.10.134.214.155.nip.io openshift_node_group_name='node-config-master'
ocpnode1.10.134.214.157.nip.io openshift_node_group_name='node-config-compute'
ocpnode2.10.134.214.158.nip.io openshift_node_group_name='node-config-compute'
ocpinfra1.10.134.214.160.nip.io openshift_node_group_name='node-config-infra'
ocpinfra2.10.134.214.161.nip.io openshift_node_group_name='node-config-infra'
ocpinfra3.10.134.214.162.nip.io openshift_node_group_name='node-config-infra'
